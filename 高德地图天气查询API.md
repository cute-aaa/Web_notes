# 高德地图天气查询API

### IP定位

IP定位API服务地址：

```
https://restapi.amap.com/v3/ip?parameters
```

*parameters*代表的参数包括必填参数和可选参数。所有参数均使用和号字符(&)进行分隔。下面的列表枚举了这些参数及其使用规则。

 https://restapi.amap.com/v3/ip?key=267c47557c6ca5e1735f01793c075c27

- **请求参数**

| 参数名 | 含义             | 规则说明                                                     | 是否必须 | 缺省值 |
| ------ | ---------------- | ------------------------------------------------------------ | -------- | ------ |
| key    | 请求服务权限标识 | 用户在高德地图官网[申请Web服务API类型KEY](https://lbs.amap.com/dev/) | 必填     | 无     |
| ip     | ip地址           | 需要搜索的IP地址（仅支持国内）若用户不填写IP，则取客户http之中的请求来进行定位 | 可选     | 无     |
| sig    | 签名             | 选择数字签名认证的付费用户必填                               | 可选     | 无     |
| output | 返回格式         | 可选值：JSON,XML                                             | 可选     | JSON   |

- **返回结果参数说明**

IP定位查询的响应结果的格式由请求参数output指定。

| 名称      | 含义                 | 规则说明                                                     |
| --------- | -------------------- | ------------------------------------------------------------ |
| status    | 返回结果状态值       | 值为0或1,0表示失败；1表示成功                                |
| info      | 返回状态说明         | 返回状态说明，status为0时，info返回错误原因，否则返回“OK”。  |
| infocode  | 状态码               | 返回状态说明,10000代表正确,详情参阅info状态表                |
| province  | 省份名称             | 若为直辖市则显示直辖市名称；如果在局域网 IP网段内，则返回“局域网”；非法IP以及国外IP则返回空 |
| city      | 城市名称             | 若为直辖市则显示直辖市名称；如果为局域网网段内IP或者非法IP或国外IP，则返回空 |
| adcode    | 城市的adcode编码     |                                                              |
| rectangle | 所在城市矩形区域范围 | 所在城市范围的左下右上对标对                                 |

- **服务示例**

```
https://restapi.amap.com/v3/ip?ip=114.247.50.2&key=<用户的key>
```

267c47557c6ca5e1735f01793c075c27

https://restapi.amap.com/v3/weather/weatherInfo?city=411300&key=267c47557c6ca5e1735f01793c075c27